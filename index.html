<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Emotion Jumper</title>
<style>
body{
  margin:0;
  font-family:Arial,sans-serif;
  background: linear-gradient(135deg,#ffd700,#ff69b4);
  overflow:hidden;
}
.container{
  max-width:500px;
  margin:auto;
  padding:10px;
  text-align:center;
}
h1{
  color:#fff;
  text-shadow:2px 2px 5px #000;
}
#gameArea{
  position:relative;
  width:100%;
  height:500px;
  background:linear-gradient(135deg,#87ceeb,#f0f8ff);
  overflow:hidden;
  border-radius:15px;
  box-shadow:0 0 20px rgba(0,0,0,0.5);
}
.character{
  width:40px;
  height:40px;
  position:absolute;
  bottom:50px;
  left:50%;
  margin-left:-20px;
  border-radius:50%;
  background:yellow;
  text-align:center;
  line-height:40px;
  font-size:24px;
  user-select:none;
}
.mood-bar{
  width:100%;
  height:20px;
  background:#555;
  border-radius:10px;
  margin:10px 0;
  overflow:hidden;
}
.mood-fill{
  height:100%;
  width:50%;
  background:green;
  transition:width 0.3s, background 0.3s;
}
.collectible, .obstacle{
  width:30px;
  height:30px;
  position:absolute;
  border-radius:50%;
}
.collectible{
  background:gold;
}
.obstacle{
  background:red;
}
button{
  margin:10px auto;
  padding:12px;
  font-size:16px;
  font-weight:bold;
  border:none;
  border-radius:12px;
  background:linear-gradient(90deg,#ffb347,#ffcc33);
  color:#fff;
}
button:hover{cursor:pointer; transform:scale(1.05);}
.hidden{display:none;}
</style>
</head>
<body>

<div class="container">
<h1>ðŸ’– Emotion Jumper ðŸ’–</h1>
<div id="startScreen">
  <button onclick="startGame()">Start Game</button>
</div>
<div id="gameScreen" class="hidden">
  <div class="mood-bar"><div class="mood-fill" id="moodFill"></div></div>
  <div id="scoreDisplay">Score: 0</div>
  <div id="gameArea"></div>
</div>
<div id="endScreen" class="hidden">
  <div id="finalScore"></div>
  <button onclick="restartGame()">Play Again</button>
</div>
</div>

<script>
// VARIABLES
let score=0;
let mood=50; // 0-100
let gameInterval;
let spawnInterval;
const gameArea=document.getElementById('gameArea');

// CHARACTER
const char=document.createElement('div');
char.className='character';
char.innerText='ðŸ˜Š';

// START GAME
function startGame(){
  document.getElementById('startScreen').classList.add('hidden');
  document.getElementById('gameScreen').classList.remove('hidden');
  score=0; mood=50;
  updateMood();
  document.getElementById('scoreDisplay').innerText='Score: '+score;
  char.style.bottom='50px';
  gameArea.innerHTML='';
  gameArea.appendChild(char);
  // Gravity & jump
  let velocity=0;
  document.addEventListener('click',()=>{
    velocity=-8; // jump
  });
  gameInterval=setInterval(()=>{
    velocity+=0.5; // gravity
    let bottom=parseFloat(char.style.bottom);
    bottom+=velocity;
    if(bottom<0) bottom=0;
    if(bottom>460) bottom=460;
    char.style.bottom=bottom+'px';
    updateMood();
    moveElements();
    checkCollision();
  },20);
  // Spawn collectibles and obstacles
  spawnInterval=setInterval(spawnElements,1000);
}

// MOOD BAR
function updateMood(){
  const fill=document.getElementById('moodFill');
  fill.style.width=mood+'%';
  if(mood>70) fill.style.background='green';
  else if(mood>30) fill.style.background='yellow';
  else fill.style.background='red';
}

// SPAWN ELEMENTS
function spawnElements(){
  const el=document.createElement(Math.random()<0.7?'div':'div');
  if(Math.random()<0.7){
    el.className='collectible';
    el.dataset.type='coin';
  }else{
    el.className='obstacle';
    el.dataset.type='trap';
  }
  el.style.bottom=Math.random()*400+'px';
  el.style.left='500px';
  gameArea.appendChild(el);
}

// MOVE ELEMENTS
function moveElements(){
  const elements=document.querySelectorAll('#gameArea .collectible, #gameArea .obstacle');
  elements.forEach(el=>{
    let left=parseFloat(el.style.left);
    left-=4;
    if(left<-30) gameArea.removeChild(el);
    else el.style.left=left+'px';
  });
}

// COLLISION DETECTION
function checkCollision(){
  const charRect=char.getBoundingClientRect();
  const elements=document.querySelectorAll('#gameArea .collectible, #gameArea .obstacle');
  elements.forEach(el=>{
    const elRect=el.getBoundingClientRect();
    if(!(charRect.right<elRect.left || charRect.left>elRect.right || charRect.bottom<elRect.top || charRect.top>elRect.bottom)){
      if(el.dataset.type==='coin'){score+=1; mood+=5;}
      if(el.dataset.type==='trap'){score-=1; mood-=10;}
      if(mood>100) mood=100;
      if(mood<0) endGame();
      document.getElementById('scoreDisplay').innerText='Score: '+score;
      el.remove();
    }
  });
}

// END GAME
function endGame(){
  clearInterval(gameInterval);
  clearInterval(spawnInterval);
  document.getElementById('gameScreen').classList.add('hidden');
  document.getElementById('endScreen').classList.remove('hidden');
  document.getElementById('finalScore').innerText='Game Over! Final Score: '+score;
}

// RESTART
function restartGame(){
  document.getElementById('endScreen').classList.add('hidden');
  document.getElementById('startScreen').classList.remove('hidden');
}
</script>

</body>
</html>

<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>World Without You</title>

<style>
body{
margin:0;
font-family:Arial, sans-serif;
background:radial-gradient(circle at center,#1f1f3a,#0f0f18);
color:white;
text-align:center;
animation:bgMove 6s infinite alternate;
}

@keyframes bgMove{
from{background:#1f1f3a;}
to{background:#121226;}
}

.container{
max-width:500px;
margin:auto;
padding:20px;
}

h1{
margin-top:20px;
}

.card{
background:#222238;
padding:20px;
margin:20px 0;
border-radius:12px;
min-height:100px;
box-shadow:0 0 20px rgba(0,0,0,0.6);
}

button{
display:block;
margin:12px auto;
padding:12px;
width:90%;
border:none;
border-radius:8px;
background:#2e8bff;
color:white;
font-size:16px;
cursor:pointer;
transition:0.2s;
}

button:hover{
background:#1f6fd6;
}

button:active{
transform:scale(0.95);
}

.hidden{
display:none;
}

.stats{
display:flex;
justify-content:space-between;
margin:10px 0;
font-size:14px;
}
</style>
</head>

<body>

<div class="container">

<h1>üåç World Without You</h1>

<div id="startScreen">
<div class="card">
The world continues without you.<br>
You are invisible.<br>
You have 60 seconds to influence destiny.
</div>
<button onclick="startGame()">Start Game</button>
</div>

<div id="gameScreen" class="hidden">
<div class="stats">
<span>‚è≥ <b id="time">60</b>s</span>
<span>‚ú® Karma: <b id="karma">0</b></span>
<span>üèÜ Best: <b id="best">0</b></span>
</div>

<div class="card" id="story"></div>
<div id="choices"></div>
</div>

<div id="endScreen" class="hidden">
<div class="card" id="result"></div>
<button onclick="restartGame()">Play Again</button>
</div>

</div>

<script>

let karma=0;
let timeLeft=60;
let timer;
let stage=0;

const events=[
{
text:"Your mother cries every night missing you.",
choices:[
{text:"Leave a mysterious gift üéÅ",effect:2},
{text:"Do nothing",effect:-1}
]
},
{
text:"A robbery is happening nearby.",
choices:[
{text:"Trigger silent alarm üö®",effect:2},
{text:"Ignore it",effect:-1}
]
},
{
text:"Your friend plans risky startup.",
choices:[
{text:"Send anonymous advice üì©",effect:1},
{text:"Let him fail",effect:-2}
]
},
{
text:"City pollution rising dangerously.",
choices:[
{text:"Expose corrupt factory üè≠",effect:2},
{text:"Stay silent",effect:-1}
]
},
{
text:"Your sister feels hopeless.",
choices:[
{text:"Leave motivational note üíå",effect:2},
{text:"Ignore her pain",effect:-2}
]
}
];

// SOUND
function clickSound(){
const ctx=new(window.AudioContext||window.webkitAudioContext)();
const osc=ctx.createOscillator();
osc.type="square";
osc.frequency.setValueAtTime(500,ctx.currentTime);
osc.connect(ctx.destination);
osc.start();
osc.stop(ctx.currentTime+0.1);
}

function endSound(){
const ctx=new(window.AudioContext||window.webkitAudioContext)();
const osc=ctx.createOscillator();
osc.type="sine";
osc.frequency.setValueAtTime(200,ctx.currentTime);
osc.connect(ctx.destination);
osc.start();
osc.stop(ctx.currentTime+0.5);
}

function startGame(){
document.getElementById("startScreen").classList.add("hidden");
document.getElementById("gameScreen").classList.remove("hidden");

karma=0;
stage=0;
timeLeft=60;

document.getElementById("karma").innerText=karma;
document.getElementById("time").innerText=timeLeft;

let best=localStorage.getItem("bestScore")||0;
document.getElementById("best").innerText=best;

timer=setInterval(updateTimer,1000);
showEvent();
}

function updateTimer(){
timeLeft--;
document.getElementById("time").innerText=timeLeft;
if(timeLeft<=0){
clearInterval(timer);
endGame();
}
}

function showEvent(){
if(stage>=events.length) stage=0;

let current=events[stage];
document.getElementById("story").innerText=current.text;

let choicesDiv=document.getElementById("choices");
choicesDiv.innerHTML="";

current.choices.forEach(choice=>{
let btn=document.createElement("button");
btn.innerText=choice.text;
btn.onclick=function(){
clickSound();
karma+=choice.effect;
document.getElementById("karma").innerText=karma;
stage++;
showEvent();
};
choicesDiv.appendChild(btn);
});
}

function endGame(){
document.getElementById("gameScreen").classList.add("hidden");
document.getElementById("endScreen").classList.remove("hidden");

endSound();

let resultText="";

if(karma>=8){
resultText="üåü Invisible Legend! The world changed because of you.";
}
else if(karma>=3){
resultText="üôÇ You quietly improved some lives.";
}
else if(karma>=0){
resultText="üòê The world barely noticed you.";
}
else{
resultText="üíî The world became worse without you.";
}

let best=localStorage.getItem("bestScore")||0;
if(karma>best){
localStorage.setItem("bestScore",karma);
best=karma;
}

resultText+="\n\n‚ú® Your Karma: "+karma;
resultText+="\nüèÜ Best Karma: "+best;

document.getElementById("result").innerText=resultText;
}

function restartGame(){
document.getElementById("endScreen").classList.add("hidden");
document.getElementById("startScreen").classList.remove("hidden");
}

</script>

</body>
</html>

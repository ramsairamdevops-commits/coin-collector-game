<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Emotion Wall - Next Level Premium</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
body{margin:0;font-family:'Poppins',sans-serif;transition:0.5s;background:linear-gradient(135deg,#141e30,#243b55);color:white;}
.dark{background:#111;color:#eee;}
header{display:flex;justify-content:space-between;align-items:center;padding:15px 20px;backdrop-filter:blur(10px);background:rgba(255,255,255,0.05);position:sticky;top:0;z-index:100;}
.logo{font-size:20px;font-weight:700;}
button{border:none;padding:8px 15px;border-radius:20px;cursor:pointer;font-weight:500;margin-left:10px;transition:0.3s;}
button:hover{opacity:0.85;}
.auth-btn{background:linear-gradient(45deg,#ff9966,#ff5e62);color:white;}
.container{max-width:500px;margin:auto;padding:20px;}
.post{background:rgba(255,255,255,0.08);padding:15px;border-radius:20px;margin-bottom:15px;backdrop-filter:blur(15px);animation:fadeIn 0.5s ease;box-shadow:0 10px 25px rgba(0,0,0,0.3);}
.username{font-weight:600;margin-bottom:5px;}
.emotion{font-size:14px;margin-bottom:8px;padding:5px 10px;border-radius:20px;display:inline-block;}
.like-btn{margin-left:10px;cursor:pointer;}
.floating{position:fixed;bottom:25px;right:25px;background:linear-gradient(45deg,#00f260,#0575e6);width:65px;height:65px;border-radius:50%;display:flex;justify-content:center;align-items:center;font-size:28px;box-shadow:0 10px 20px rgba(0,0,0,0.4);cursor:pointer;}
.modal{display:none;position:fixed;width:100%;height:100%;background:rgba(0,0,0,0.8);justify-content:center;align-items:center;z-index:200;}
.modal-content{background:#1c1c2e;padding:20px;border-radius:20px;width:90%;max-width:400px;}
input,textarea,select{width:100%;padding:10px;margin-top:10px;border:none;border-radius:10px;outline:none;}
@keyframes fadeIn{from{opacity:0;transform:translateY(10px);}to{opacity:1;transform:translateY(0);}}
footer{text-align:center;margin:30px 0;opacity:0.6;font-size:12px;}
</style>
</head>
<body>

<header>
    <div class="logo">ğŸ’ Emotion Wall Premium</div>
    <div>
        <button class="auth-btn" onclick="openLogin()">Login</button>
        <button class="auth-btn" onclick="openSignup()">Sign Up</button>
        <button class="auth-btn" onclick="toggleDark()">ğŸŒ™</button>
    </div>
</header>

<div class="container" id="trending"></div>
<div class="container" id="posts"></div>
<div class="floating" onclick="openPost()">+</div>

<!-- Login Modal -->
<div class="modal" id="loginModal">
    <div class="modal-content">
        <h3>Login</h3>
        <input type="text" id="loginName" placeholder="Your Name">
        <button class="auth-btn" onclick="login()">Login</button>
    </div>
</div>

<!-- Sign Up Modal -->
<div class="modal" id="signupModal">
    <div class="modal-content">
        <h3>Sign Up</h3>
        <input type="text" id="signupName" placeholder="Name">
        <input type="email" id="signupEmail" placeholder="Email">
        <input type="tel" id="signupPhone" placeholder="Phone">
        <button class="auth-btn" onclick="signup()">Sign Up</button>
    </div>
</div>

<!-- Post Modal -->
<div class="modal" id="postModal">
    <div class="modal-content">
        <h3>Share Your Emotion</h3>
        <select id="emotionSelect">
            <option value="ğŸ˜Š Happy">ğŸ˜Š Happy</option>
            <option value="ğŸ˜¢ Sad">ğŸ˜¢ Sad</option>
            <option value="â¤ï¸ Love">â¤ï¸ Love</option>
            <option value="ğŸ˜¡ Angry">ğŸ˜¡ Angry</option>
            <option value="ğŸ”¥ Motivated">ğŸ”¥ Motivated</option>
        </select>
        <textarea id="postText" rows="4" placeholder="Write your feelings..."></textarea>
        <button class="auth-btn" onclick="addPost()">Share</button>
    </div>
</div>

<!-- Emotion Analytics -->
<div class="container">
<h3>ğŸ“Š Mood Analytics</h3>
<canvas id="emotionChart"></canvas>
</div>

<footer>Â© 2026 Emotion Wall Premium | Mobile & Desktop</footer>

<script>
// Firebase Config
const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "YOUR_PROJECT.firebaseapp.com",
  databaseURL: "https://YOUR_PROJECT.firebaseio.com",
  projectId: "YOUR_PROJECT",
  storageBucket: "YOUR_PROJECT.appspot.com",
  messagingSenderId: "SENDER_ID",
  appId: "APP_ID"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

let currentUser = "";
const emotionColors = {
  "ğŸ˜Š Happy":"#ffeb3b","ğŸ˜¢ Sad":"#2196f3","â¤ï¸ Love":"#e91e63","ğŸ˜¡ Angry":"#f44336","ğŸ”¥ Motivated":"#ff9800"
};

// Dark Mode
function toggleDark(){document.body.classList.toggle("dark");}

// Login & Signup
function openLogin(){document.getElementById("loginModal").style.display="flex";}
function openSignup(){document.getElementById("signupModal").style.display="flex";}

function login(){
    let name=document.getElementById("loginName").value;
    if(name){currentUser=name;document.getElementById("loginModal").style.display="none";loadPosts();}
    else alert("Enter your name");
}

function signup(){
    let name=document.getElementById("signupName").value;
    let email=document.getElementById("signupEmail").value;
    let phone=document.getElementById("signupPhone").value;
    if(name && email && phone){
        currentUser=name;
        db.ref('users').push({name,email,phone});
        document.getElementById("signupModal").style.display="none";
        loadPosts();
    } else alert("Fill all details");
}

// Post Modal
function openPost(){if(!currentUser){alert("Login/Sign Up first");return;}document.getElementById("postModal").style.display="flex";}

// Add Post
function addPost(){
    let text=document.getElementById("postText").value;
    let emotion=document.getElementById("emotionSelect").value;
    if(text){
        db.ref('posts').push({user:currentUser,emotion,text,likes:0});
        document.getElementById("postText").value="";
        document.getElementById("postModal").style.display="none";
    }
}

// Load Posts & Trending
function loadPosts(){
    db.ref('posts').on('value', snapshot=>{
        const postsContainer=document.getElementById("posts");
        const trendingContainer=document.getElementById("trending");
        postsContainer.innerHTML="";
        trendingContainer.innerHTML="<h3>ğŸ”¥ Trending Emotions</h3>";
        const data=snapshot.val();
        const emotionCount={"ğŸ˜Š Happy":0,"ğŸ˜¢ Sad":0,"â¤ï¸ Love":0,"ğŸ˜¡ Angry":0,"ğŸ”¥ Motivated":0};
        if(!data) return;
        for(let key in data){
            const p=data[key];
            emotionCount[p.emotion]++;
            const div=document.createElement("div");
            div.className="post";
            div.style.borderLeft=`5px solid ${emotionColors[p.emotion]}`;
            div.innerHTML=`<div class="username">${p.user}</div><div class="emotion">${p.emotion}</div><div>${p.text}</div><span class="like-btn" onclick="likePost('${key}')">â¤ï¸ ${p.likes}</span>`;
            postsContainer.prepend(div);
        }
        // Update trending
        const sorted=Object.keys(emotionCount).sort((a,b)=>emotionCount[b]-emotionCount[a]);
        sorted.forEach(em=>{if(emotionCount[em]>0){const t=document.createElement("div");t.className="post";t.style.borderLeft=`5px solid ${emotionColors[em]}`;t.innerHTML=`<div class="emotion">${em} - ${emotionCount[em]} posts</div>`; trendingContainer.appendChild(t);}});
        updateChart(emotionCount);
        updateBackground(emotionCount);
    });
}

// Like Post
function likePost(key){ db.ref(`posts/${key}/likes`).transaction(likes=>(likes||0)+1); }

// Chart
const ctx=document.getElementById('emotionChart').getContext('2d');
let chart;
function updateChart(counts){
    const labels=Object.keys(counts);
    const values=Object.values(counts);
    if(chart) chart.destroy();
    chart=new Chart(ctx,{type:'bar',data:{labels,datasets:[{label:'Emotion Count',data:values,backgroundColor:Object.values(emotionColors)}]},options:{responsive:true,plugins:{legend:{display:false}},scales:{y:{beginAtZero:true}}}});
}

// Dynamic Background
function updateBackground(counts){
    let maxEmotion=Object.keys(counts).reduce((a,b)=>counts[a]>counts[b]?a:b);
    document.body.style.background=`linear-gradient(135deg, ${emotionColors[maxEmotion]}, #1c1c2e)`;
}

</script>

</body>
</html>

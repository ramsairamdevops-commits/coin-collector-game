<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Top-End Coin Collector</title>
<style>
body {
  margin: 0;
  font-family:'Arial',sans-serif;
  background: linear-gradient(135deg,#1e3c72,#2a5298);
  color: #fff;
  text-align: center;
  overflow: hidden;
}
.container {
  max-width:500px;
  margin:auto;
  padding:20px;
}
h1{
  margin-top:20px;
  font-size:28px;
  text-shadow:2px 2px 5px #000;
}
.card{
  background: rgba(255,255,255,0.1);
  padding:20px;
  margin:20px 0;
  border-radius:15px;
  box-shadow:0 8px 20px rgba(0,0,0,0.5);
  transition:0.3s;
}
button{
  display:block;
  margin:12px auto;
  padding:14px;
  width:90%;
  border:none;
  border-radius:12px;
  font-size:16px;
  font-weight:bold;
  color:#fff;
  cursor:pointer;
  background: linear-gradient(90deg,#ffb347,#ffcc33);
  transition:0.3s;
}
button:hover{
  background: linear-gradient(90deg,#ffcc33,#ffb347);
  transform: scale(1.05);
}
button:active{transform: scale(0.95);}
.hidden{display:none;}
.stats{
  display:flex;
  justify-content:space-between;
  margin:10px 0;
  font-size:16px;
  font-weight:bold;
}
.timer-bar{
  height:12px;
  background:#ffcc33;
  border-radius:6px;
  margin:10px 0;
  transition: width 0.3s;
}
.coin{
  width:30px;
  height:30px;
  border-radius:50%;
  position:absolute;
  animation:fall linear;
}
.gold{background:gold;}
.trap{background:red;}
@keyframes fall{
  0%{transform:translateY(0);}
  100%{transform:translateY(500px);}
}
</style>
</head>
<body>

<div class="container">
<h1>üíé Top-End Coin Collector</h1>

<div id="startScreen">
  <div class="card">Collect coins, avoid traps, grab power-ups!<br>Try to beat your best score.</div>
  <button onclick="startGame()">Start Game</button>
</div>

<div id="gameScreen" class="hidden">
  <div class="stats">
    <span>‚è≥ <b id="time">60</b>s</span>
    <span>üí∞ <b id="coins">0</b></span>
    <span>üèÜ <b id="best">0</b></span>
  </div>
  <div class="timer-bar" id="timerBar"></div>
  <div class="card" id="story">Tap coins to collect them!</div>
  <div id="gameArea" style="position:relative;height:400px;"></div>
</div>

<div id="endScreen" class="hidden">
  <div class="card" id="result"></div>
  <button onclick="restartGame()">Play Again</button>
</div>

</div>

<script>
let coins=0;
let timeLeft=60;
let timer;
let best=localStorage.getItem("bestScore")||0;
const gameArea=document.getElementById("gameArea");
let spawnInterval;

// SOUND
function playSound(f,d){
  const ctx=new (window.AudioContext||window.webkitAudioContext)();
  const osc=ctx.createOscillator();
  osc.type='square';
  osc.frequency.setValueAtTime(f,ctx.currentTime);
  osc.connect(ctx.destination);
  osc.start();
  osc.stop(ctx.currentTime+d);
}

// TIMER BAR
function updateTimerBar(){
  document.getElementById("timerBar").style.width=(timeLeft/60*100)+'%';
}

// SPAWN ELEMENTS
function spawnElement(){
  const type=Math.random();
  const elem=document.createElement("div");
  elem.className='coin';
  if(type<0.7){elem.classList.add('gold');} else {elem.classList.add('trap');}
  elem.style.left=Math.random()*470+'px';
  gameArea.appendChild(elem);
  elem.addEventListener('click',()=>{
    if(elem.classList.contains('gold')){coins+=1; playSound(800,0.1);}
    else{coins-=1; playSound(200,0.2);}
    document.getElementById('coins').innerText=coins;
    gameArea.removeChild(elem);
  });
  setTimeout(()=>{if(gameArea.contains(elem)) gameArea.removeChild(elem);},5000);
}

// START GAME
function startGame(){
  document.getElementById('startScreen').classList.add('hidden');
  document.getElementById('gameScreen').classList.remove('hidden');
  coins=0; timeLeft=60;
  document.getElementById('coins').innerText=coins;
  document.getElementById('time').innerText=timeLeft;
  document.getElementById('best').innerText=best;
  updateTimerBar();

  spawnInterval=setInterval(spawnElement,800);

  timer=setInterval(()=>{
    timeLeft--;
    document.getElementById('time').innerText=timeLeft;
    updateTimerBar();
    if(timeLeft<=0){clearInterval(timer); clearInterval(spawnInterval); endGame();}
  },1000);
}

// END GAME
function endGame(){
  document.getElementById('gameScreen').classList.add('hidden');
  document.getElementById('endScreen').classList.remove('hidden');
  if(coins>best){best=coins; localStorage.setItem('bestScore',best);}
  document.getElementById('result').innerText=`üéâ Game Over!\nüí∞ Coins collected: ${coins}\nüèÜ Best Score: ${best}`;
}

// RESTART
function restartGame(){
  document.getElementById('endScreen').classList.add('hidden');
  document.getElementById('startScreen').classList.remove('hidden');
}
</script>

</body>
</html>
